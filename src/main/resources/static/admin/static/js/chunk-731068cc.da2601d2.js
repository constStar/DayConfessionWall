(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-731068cc"],{"0fce":function(e,t,a){"use strict";a.r(t);a("7f7f"),a("386d");var r=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{attrs:{shadow:"hover"}},[t("el-tabs",{model:{value:e.pageState,callback:function(t){e.pageState=t},expression:"pageState"}},[t("el-tab-pane",{attrs:{label:"待处理",name:"0"}}),t("el-tab-pane",{attrs:{label:"举报通过",name:"1"}}),t("el-tab-pane",{attrs:{label:"举报未通过",name:"-1"}})],1),t("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":e.tableRowClassName,data:e.users}},[t("el-table-column",{attrs:{prop:"id",width:"50"}}),t("el-table-column",{attrs:{prop:"name",label:"用户名称",width:"130"}}),t("el-table-column",{attrs:{prop:"studentId",label:"学号",width:"140"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"160"}}),t("el-table-column",{attrs:{prop:"wechat","show-overflow-tooltip":"",label:"微信",width:"90"}}),t("el-table-column",{attrs:{prop:"lastTime",label:"上次登录时间",width:"140"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"140"}}),t("el-table-column",{attrs:{prop:"roleName",label:"角色",width:"70"}}),t("el-table-column",{attrs:{prop:"stateName",label:"账号状态",width:"80"}}),t("el-table-column",{attrs:{width:"200"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{staticClass:"input-with-select",attrs:{size:"mini",placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[e.isSearch?t("el-button",{attrs:{slot:"append",icon:"el-icon-close"},on:{click:e.clearSearch},slot:"append"}):e._e(),e.isSearch?e._e():t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)]}},{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openDialogInfo(a.$index)}}},[e._v("查看详情")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-size":e.pageSize,total:e.userCount},on:{"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"current-change":e.setPage}})],1),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.dialogInfoShow,title:"举报详情",top:"4vh",center:"",width:"70%",fullscreen:e.isMobile},on:{"update:visible":function(t){e.dialogInfoShow=t}}},[t("el-form",{ref:"formRef",attrs:{"label-position":"top",model:e.dialogInfoData}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xl:12,lg:12,md:24,sm:24,xs:24}},[t("el-form-item",{attrs:{label:"id"}},[t("el-input",{attrs:{readonly:""},model:{value:e.dialogInfoData.user.id,callback:function(t){e.$set(e.dialogInfoData.user,"id",t)},expression:"dialogInfoData.user.id"}})],1),t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{readonly:""},model:{value:e.dialogInfoData.user.name,callback:function(t){e.$set(e.dialogInfoData.user,"name",t)},expression:"dialogInfoData.user.name"}})],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:"用户状态"},model:{value:e.dialogInfoData.user.state,callback:function(t){e.$set(e.dialogInfoData.user,"state",t)},expression:"dialogInfoData.user.state"}},[t("el-option",{attrs:{disabled:"",label:"正常",value:0}}),t("el-option",{attrs:{disabled:"",label:"待审核",value:1}}),t("el-option",{attrs:{disabled:"",label:"封禁",value:-1}})],1)],1)],1),t("el-col",{attrs:{xl:12,lg:12,md:24,sm:24,xs:24}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xl:17,lg:17,md:24,sm:24,xs:24}},[t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{attrs:{readonly:""},model:{value:e.dialogInfoData.user.email,callback:function(t){e.$set(e.dialogInfoData.user,"email",t)},expression:"dialogInfoData.user.email"}})],1),t("el-form-item",{attrs:{label:"微信"}},[t("el-input",{attrs:{readonly:""},model:{value:e.dialogInfoData.user.wechat,callback:function(t){e.$set(e.dialogInfoData.user,"wechat",t)},expression:"dialogInfoData.user.wechat"}})],1)],1),t("el-col",{attrs:{xl:7,lg:7,md:24,sm:24,xs:24}},[e.isMobile?e._e():t("img",{staticClass:"user-avatar",attrs:{src:e.IMAGE_URL+e.dialogInfoData.user.avatar,alt:""}})])],1),t("el-form-item",{attrs:{label:"学号"}},[t("el-input",{attrs:{readonly:""},model:{value:e.dialogInfoData.user.studentId,callback:function(t){e.$set(e.dialogInfoData.user,"studentId",t)},expression:"dialogInfoData.user.studentId"}})],1)],1)],1)],1),t("el-table",{attrs:{height:"240","row-class-name":e.tableRowClassName,data:e.dialogInfoData.reports,"default-sort":{prop:"createTime",order:"descending"}}},[t("el-table-column",{attrs:{sortable:"",property:"reportUserId",label:"举报者id",width:"150"}}),t("el-table-column",{attrs:{sortable:"",property:"reportUserName",label:"举报者名称",width:"150"}}),t("el-table-column",{attrs:{sortable:"",property:"typeName",label:"举报类型",width:"200"}}),t("el-table-column",{attrs:{sortable:"",property:"content",label:"举报内容"}}),t("el-table-column",{attrs:{sortable:"",property:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{sortable:"",property:"stateName",label:"举报状态"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"danger"},on:{click:e.successReport}},[e._v("举报通过")]),t("el-button",{attrs:{type:"info"},on:{click:e.failReport}},[e._v("未通过")])],1)],1)],1)},o=[],s=a("baf5"),n=a("942d"),l=a("403a"),i={name:"ReportUser",data:function(){return{IMAGE_URL:l["a"].image,users:[],sortName:null,sortType:null,pageIndex:1,pageSize:10,userCount:0,keyword:"",isSearch:!1,dialogInfoShow:!1,dialogInfoData:{user:{},reports:[]},pageState:0}},created:function(){this.getReportUsers()},watch:{pageState:function(){this.getReportUsers()}},methods:{failReport:function(){var e=this;s["a"].handleReport(this.dialogInfoData.user.id,!1).then((function(t){e.$message.success(t.message),e.getReportUsers(),e.closeDialogInfo()}))},successReport:function(){var e=this;s["a"].handleReport(this.dialogInfoData.user.id,!0).then((function(t){e.$message.success(t.message),e.getReportUsers(),e.closeDialogInfo()}))},getDialogInfoDatas:function(e){var t=this;n["a"].user(e).then((function(e){t.$set(t.dialogInfoData,"user",e.data)})),s["a"].getReportByUser(e).then((function(e){t.$set(t.dialogInfoData,"reports",e.data)}))},openDialogInfo:function(e){var t=this.users[e];this.getDialogInfoDatas(t.id),this.dialogInfoShow=!0},closeDialogInfo:function(){this.dialogInfoShow=!1},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1===t.state?"lock-row":1===t.state?"wait-row":""},clearSearch:function(){this.pageIndex=1,this.keyword="",this.isSearch=!1,this.getReportUsers()},search:function(){this.pageIndex=1,""==this.keyword?this.isSearch=!1:this.isSearch=!0,this.getReportUsers()},setPage:function(e){this.getReportUsers()},getReporUser:function(e){var t=this;s["a"].user(this.users[e].id).then((function(a){t.$set(t.users,e,a.data)}))},getReportUsers:function(){var e=this;this.isSearch?(s["a"].searchCount(this.keyword,this.pageState).then((function(t){e.userCount=t.data})),s["a"].searchList(this.keyword,this.pageIndex,this.pageSize,this.pageState).then((function(t){e.users=t.data}))):(s["a"].count(this.pageState).then((function(t){e.userCount=t.data})),s["a"].pageList(this.pageIndex,this.pageSize,this.pageState).then((function(t){e.users=t.data})))}},computed:{isMobile:function(){return screen.width<=425}}},u=i,c=(a("691c"),a("2877")),d=Object(c["a"])(u,r,o,!1,null,null,null);t["default"]=d.exports},"691c":function(e,t,a){"use strict";a("cae6")},"942d":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("b775"),o={pageList:function(e,t,a,o){return Object(r["a"])({url:"/api/admin/user/pageList",method:"get",params:{pageIndex:e,pageSize:t,rankName:a,rankType:o}})},count:function(){return Object(r["a"])({url:"/api/admin/user/count",method:"get"})},searchList:function(e,t,a,o,s){return Object(r["a"])({url:"/api/admin/user/searchList",method:"get",params:{keyword:e,pageIndex:t,pageSize:a,rankName:o,rankType:s}})},searchCount:function(e){return Object(r["a"])({url:"/api/admin/user/searchCount",method:"get",params:{keyword:e}})},user:function(e){return Object(r["a"])({url:"/api/admin/user/user",method:"get",params:{userId:e}})},getExamineCount:function(){return Object(r["a"])({url:"/api/admin/user/getExamineCount",method:"get"})},updateUser:function(e,t,a,o,s,n){return Object(r["a"])({url:"/api/admin/user/updateUser",method:"put",params:{userId:e,name:t,email:a,wechat:o,studentId:s,state:n}})},delete:function(e){return Object(r["a"])({url:"/api/admin/user/deleteUser",method:"delete",params:{userId:e}})}}},baf5:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("b775"),o={pageList:function(e,t,a){return Object(r["a"])({url:"/api/admin/reportUser/pageList",method:"get",params:{pageIndex:e,pageSize:t,state:a}})},count:function(e){return Object(r["a"])({url:"/api/admin/reportUser/count",method:"get",params:{state:e}})},searchList:function(e,t,a,o){return Object(r["a"])({url:"/api/admin/reportUser/searchList",method:"get",params:{keyword:e,pageIndex:t,pageSize:a,state:o}})},searchCount:function(e,t){return Object(r["a"])({url:"/api/admin/reportUser/searchCount",method:"get",params:{keyword:e,state:t}})},getReportByUser:function(e){return Object(r["a"])({url:"/api/admin/reportUser/getReportByUser",method:"get",params:{userId:e}})},getReportByReportUser:function(e){return Object(r["a"])({url:"/api/admin/reportUser/getReportByReportUser",method:"get",params:{reportUserId:e}})},handleReport:function(e,t){return Object(r["a"])({url:"/api/admin/reportUser/handleReport",method:"put",params:{userId:e,agree:t}})}}},cae6:function(e,t,a){}}]);