(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd29f140"],{"5ec6":function(e,t,a){},"6c84":function(e,t,a){"use strict";a.r(t);a("386d");var l=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{attrs:{shadow:"hover"}},[t("el-tabs",{model:{value:e.pageState,callback:function(t){e.pageState=t},expression:"pageState"}},[t("el-tab-pane",{attrs:{label:"待处理",name:"0"}}),t("el-tab-pane",{attrs:{label:"举报通过",name:"1"}}),t("el-tab-pane",{attrs:{label:"举报未通过",name:"-1"}})],1),t("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":e.tableRowClassName,data:e.tables}},[t("el-table-column",{attrs:{prop:"id",width:"50"}}),t("el-table-column",{attrs:{prop:"sender",label:"表白者",width:"100"}}),t("el-table-column",{attrs:{prop:"recipient",label:"被表白者",width:"100"}}),t("el-table-column",{attrs:{prop:"content","show-overflow-tooltip":"",label:"内容",width:"350"}}),t("el-table-column",{attrs:{prop:"images","show-overflow-tooltip":"",label:"图片列表",width:"180"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"140"}}),t("el-table-column",{attrs:{prop:"stateName",label:"状态",width:"80"}}),t("el-table-column",{attrs:{width:"200"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{staticClass:"input-with-select",attrs:{size:"mini",placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[e.isSearch?t("el-button",{attrs:{slot:"append",icon:"el-icon-close"},on:{click:e.clearSearch},slot:"append"}):e._e(),e.isSearch?e._e():t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)]}},{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openDialogInfo(a.$index)}}},[e._v("查看详情")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-size":e.pageSize,total:e.tableCount},on:{"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"current-change":e.setPage}})],1),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.dialogInfoShow,title:"举报详情",top:"4vh",center:"",width:"70%",fullscreen:e.isMobile},on:{"update:visible":function(t){e.dialogInfoShow=t}}},[t("el-form",{ref:"formRef",attrs:{"label-position":"top",model:e.dialogInfoData}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xl:12,lg:12,md:24,sm:24,xs:24}},[t("el-form-item",{attrs:{label:"id"}},[0==e.dialogInfoData.table.anonymous?t("el-tag",{attrs:{type:"info"}},[e._v("身份公开")]):1==e.dialogInfoData.table.anonymous?t("el-tag",{attrs:{type:"info"}},[e._v("匿名")]):e._e(),t("el-input",{attrs:{disabled:""},model:{value:e.dialogInfoData.table.id,callback:function(t){e.$set(e.dialogInfoData.table,"id",t)},expression:"dialogInfoData.table.id"}})],1),t("el-form-item",{attrs:{label:"表白者"}},[1==e.dialogInfoData.table.senderGender?t("el-tag",{attrs:{type:"info"}},[e._v("男")]):2==e.dialogInfoData.table.senderGender?t("el-tag",{attrs:{type:"info"}},[e._v("女")]):0==e.dialogInfoData.table.senderGender?t("el-tag",{attrs:{type:"info"}},[e._v("性别保密")]):e._e(),t("el-input",{model:{value:e.dialogInfoData.table.sender,callback:function(t){e.$set(e.dialogInfoData.table,"sender",t)},expression:"dialogInfoData.table.sender"}})],1),t("el-form-item",{attrs:{label:"被表白者"}},[1==e.dialogInfoData.table.recipientGender?t("el-tag",{attrs:{type:"info"}},[e._v("男")]):2==e.dialogInfoData.table.recipientGender?t("el-tag",{attrs:{type:"info"}},[e._v("女")]):0==e.dialogInfoData.table.recipientGender?t("el-tag",{attrs:{type:"info"}},[e._v("性别保密")]):e._e(),t("el-input",{model:{value:e.dialogInfoData.table.recipient,callback:function(t){e.$set(e.dialogInfoData.table,"recipient",t)},expression:"dialogInfoData.table.recipient"}})],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:"帖子状态"},model:{value:e.dialogInfoData.table.state,callback:function(t){e.$set(e.dialogInfoData.table,"state",t)},expression:"dialogInfoData.table.state"}},[t("el-option",{attrs:{label:"正常",value:0}}),t("el-option",{attrs:{label:"待审核",value:1}}),t("el-option",{attrs:{label:"封禁",value:-1}})],1)],1)],1),t("el-col",{attrs:{xl:12,lg:12,md:24,sm:24,xs:24}},[t("el-form-item",{attrs:{label:"内容"}},[t("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.dialogInfoData.table.content,callback:function(t){e.$set(e.dialogInfoData.table,"content",t)},expression:"dialogInfoData.table.content"}})],1),t("el-form-item",{attrs:{label:"图片列表"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.dialogInfoData.table.images,callback:function(t){e.$set(e.dialogInfoData.table,"images",t)},expression:"dialogInfoData.table.images"}}),t("div",e._l(JSON.parse(null==e.dialogInfoData.table.images?"[]":e.dialogInfoData.table.images),(function(a,l){return t("el-image",{key:l,staticStyle:{width:"33%"},attrs:{src:e.IMAGE_URL+a}})})),1)],1)],1)],1)],1),t("el-table",{attrs:{height:"240","row-class-name":e.tableRowClassName,data:e.dialogInfoData.reports,"default-sort":{prop:"createTime",order:"descending"}}},[t("el-table-column",{attrs:{sortable:"",property:"reportUserId",label:"举报者id",width:"150"}}),t("el-table-column",{attrs:{sortable:"",property:"reportUserName",label:"举报者名称",width:"150"}}),t("el-table-column",{attrs:{sortable:"",property:"typeName",label:"举报类型",width:"200"}}),t("el-table-column",{attrs:{sortable:"",property:"content",label:"举报内容"}}),t("el-table-column",{attrs:{sortable:"",property:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{sortable:"",property:"stateName",label:"举报状态"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"danger"},on:{click:e.successReport}},[e._v("举报通过")]),t("el-button",{attrs:{type:"info"},on:{click:e.failReport}},[e._v("未通过")])],1)],1)],1)},o=[],n=a("f840"),r=a("9ab0"),i=a("403a"),s={name:"ReportTable",data:function(){return{IMAGE_URL:i["a"].image,tables:[],sortName:null,sortType:null,pageIndex:1,pageSize:10,tableCount:0,keyword:"",isSearch:!1,dialogInfoShow:!1,dialogInfoData:{table:{},reports:[]},pageState:0}},created:function(){this.getReportTables()},watch:{pageState:function(){this.getReportTables()}},methods:{failReport:function(){var e=this;n["a"].handleReport(this.dialogInfoData.table.id,!1).then((function(t){e.$message.success(t.message),e.getReportTables(),e.closeDialogInfo()}))},successReport:function(){var e=this;n["a"].handleReport(this.dialogInfoData.table.id,!0).then((function(t){e.$message.success(t.message),e.getReportTables(),e.closeDialogInfo()}))},getDialogInfoDatas:function(e){var t=this;r["a"].table(e).then((function(e){t.$set(t.dialogInfoData,"table",e.data)})),n["a"].getReportByTable(e).then((function(e){t.$set(t.dialogInfoData,"reports",e.data)}))},openDialogInfo:function(e){var t=this.tables[e];this.getDialogInfoDatas(t.id),this.dialogInfoShow=!0},closeDialogInfo:function(){this.dialogInfoShow=!1},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1===t.state?"lock-row":1===t.state?"wait-row":""},clearSearch:function(){this.pageIndex=1,this.keyword="",this.isSearch=!1,this.getReportTables()},search:function(){this.pageIndex=1,""==this.keyword?this.isSearch=!1:this.isSearch=!0,this.getReportTables()},setPage:function(e){this.getReportTables()},getReporTable:function(e){var t=this;n["a"].table(this.tables[e].id).then((function(a){t.$set(t.tables,e,a.data)}))},getReportTables:function(){var e=this;this.isSearch?(n["a"].searchCount(this.keyword,this.pageState).then((function(t){e.tableCount=t.data})),n["a"].searchList(this.keyword,this.pageIndex,this.pageSize,this.pageState).then((function(t){e.tables=t.data}))):(n["a"].count(this.pageState).then((function(t){e.tableCount=t.data})),n["a"].pageList(this.pageIndex,this.pageSize,this.pageState).then((function(t){e.tables=t.data})))}},computed:{isMobile:function(){return screen.width<=425}}},c=s,p=(a("9389"),a("2877")),d=Object(p["a"])(c,l,o,!1,null,null,null);t["default"]=d.exports},9389:function(e,t,a){"use strict";a("5ec6")},"9ab0":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var l=a("b775"),o={pageList:function(e,t,a,o){return Object(l["a"])({url:"/api/admin/table/pageList",method:"get",params:{pageIndex:e,pageSize:t,rankName:a,rankType:o}})},count:function(){return Object(l["a"])({url:"/api/admin/table/count",method:"get"})},searchList:function(e,t,a,o,n){return Object(l["a"])({url:"/api/admin/table/searchList",method:"get",params:{keyword:e,pageIndex:t,pageSize:a,rankName:o,rankType:n}})},searchCount:function(e){return Object(l["a"])({url:"/api/admin/table/searchCount",method:"get",params:{keyword:e}})},table:function(e){return Object(l["a"])({url:"/api/admin/table/table",method:"get",params:{tableId:e}})},getExamineCount:function(){return Object(l["a"])({url:"/api/admin/table/getExamineCount",method:"get"})},updateTable:function(e,t,a,o,n,r,i,s,c){return Object(l["a"])({url:"/api/admin/table/updateTable",method:"put",params:{tableId:e,sender:t,senderGender:a,recipient:o,recipientGender:n,content:r,images:i,notifyEmail:s,state:c}})},delete:function(e){return Object(l["a"])({url:"/api/admin/table/deleteTable",method:"delete",params:{tableId:e}})}}},f840:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var l=a("b775"),o={pageList:function(e,t,a){return Object(l["a"])({url:"/api/admin/reportTable/pageList",method:"get",params:{pageIndex:e,pageSize:t,state:a}})},count:function(e){return Object(l["a"])({url:"/api/admin/reportTable/count",method:"get",params:{state:e}})},searchList:function(e,t,a,o){return Object(l["a"])({url:"/api/admin/reportTable/searchList",method:"get",params:{keyword:e,pageIndex:t,pageSize:a,state:o}})},searchCount:function(e,t){return Object(l["a"])({url:"/api/admin/reportTable/searchCount",method:"get",params:{keyword:e,state:t}})},getReportByTable:function(e){return Object(l["a"])({url:"/api/admin/reportTable/getReportByTable",method:"get",params:{tableId:e}})},getReportByReportUser:function(e){return Object(l["a"])({url:"/api/admin/reportTable/getReportByReportUser",method:"get",params:{reportUserId:e}})},handleReport:function(e,t){return Object(l["a"])({url:"/api/admin/reportTable/handleReport",method:"put",params:{tableId:e,agree:t}})}}}}]);